(()=>{var e={};e.id=439,e.ids=[439],e.modules={10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},81630:e=>{"use strict";e.exports=require("http")},55591:e=>{"use strict";e.exports=require("https")},33873:e=>{"use strict";e.exports=require("path")},11997:e=>{"use strict";e.exports=require("punycode")},27910:e=>{"use strict";e.exports=require("stream")},79551:e=>{"use strict";e.exports=require("url")},74075:e=>{"use strict";e.exports=require("zlib")},60712:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>n.a,__next_app__:()=>u,pages:()=>c,routeModule:()=>p,tree:()=>l});var s=r(70260),a=r(28203),i=r(25155),n=r.n(i),d=r(67292),o={};for(let e in d)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>d[e]);r.d(t,o);let l=["",{children:["site-visits",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,22924)),"/workspace/web-next/src/app/site-visits/page.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,93607)),"/workspace/web-next/src/app/site-visits/layout.tsx"],loading:[()=>Promise.resolve().then(r.bind(r,31977)),"/workspace/web-next/src/app/site-visits/loading.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,71354)),"/workspace/web-next/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,19937,23)),"next/dist/client/components/not-found-error"]}],c=["/workspace/web-next/src/app/site-visits/page.tsx"],u={require:r,loadChunk:()=>Promise.resolve()},p=new s.AppPageRouteModule({definition:{kind:a.RouteKind.APP_PAGE,page:"/site-visits/page",pathname:"/site-visits",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:l}})},90528:(e,t,r)=>{Promise.resolve().then(r.bind(r,22924))},54080:(e,t,r)=>{Promise.resolve().then(r.bind(r,15498))},96487:()=>{},78335:()=>{},18741:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});let s=(0,r(41680).A)("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]])},26008:(e,t,r)=>{"use strict";r.d(t,{default:()=>a.a});var s=r(87801),a=r.n(s)},15498:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>_,dynamic:()=>k});var s=r(45512),a=r(58009),i=r(26008),n=r(33115),d=r(62895),o=r(39400),l=r(64590),c=r(78447),u=r(44195);let p=a.forwardRef(({className:e,...t},r)=>(0,s.jsx)("div",{className:"relative w-full overflow-auto",children:(0,s.jsx)("table",{ref:r,className:(0,u.cn)("w-full caption-bottom text-sm",e),...t})}));p.displayName="Table";let x=a.forwardRef(({className:e,...t},r)=>(0,s.jsx)("thead",{ref:r,className:(0,u.cn)("[&_tr]:border-b",e),...t}));x.displayName="TableHeader";let m=a.forwardRef(({className:e,...t},r)=>(0,s.jsx)("tbody",{ref:r,className:(0,u.cn)("[&_tr:last-child]:border-0",e),...t}));m.displayName="TableBody",a.forwardRef(({className:e,...t},r)=>(0,s.jsx)("tfoot",{ref:r,className:(0,u.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...t})).displayName="TableFooter";let f=a.forwardRef(({className:e,...t},r)=>(0,s.jsx)("tr",{ref:r,className:(0,u.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",e),...t}));f.displayName="TableRow";let h=a.forwardRef(({className:e,...t},r)=>(0,s.jsx)("th",{ref:r,className:(0,u.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",e),...t}));h.displayName="TableHead";let v=a.forwardRef(({className:e,...t},r)=>(0,s.jsx)("td",{ref:r,className:(0,u.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",e),...t}));v.displayName="TableCell",a.forwardRef(({className:e,...t},r)=>(0,s.jsx)("caption",{ref:r,className:(0,u.cn)("mt-4 text-sm text-muted-foreground",e),...t})).displayName="TableCaption";var b=r(18741),g=r(41680);let y=(0,g.A)("FileCheck",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]]),j=(0,g.A)("MapPin",[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]]),w=(0,g.A)("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]),N=(0,g.A)("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),k="force-dynamic";function _(){let e=(0,d.b)(),{data:t=[],isLoading:r}=(0,n.I)({queryKey:["site-visits"],queryFn:async()=>{let{data:t,error:r}=await e.from("site_visit").select(`
          *,
          employer:employers(name),
          job_site:job_sites(name, location)
        `).order("scheduled_at",{ascending:!1});if(r)throw r;return t??[]}}),a=e=>(0,s.jsx)(c.E,{variant:e?"default":"secondary",children:e?"COMPLETED":"PLANNED"});return r?(0,s.jsx)("div",{className:"p-6",children:"Loading site visits..."}):(0,s.jsxs)("main",{className:"container mx-auto p-6",children:[(0,s.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-3xl font-bold",children:"Site Visits"}),(0,s.jsx)("p",{className:"text-muted-foreground",children:"Plan and manage visits to construction sites"})]}),(0,s.jsx)(o.$,{asChild:!0,children:(0,s.jsxs)(i.default,{href:"/site-visits/new",children:[(0,s.jsx)(b.A,{className:"h-4 w-4 mr-2"}),"Plan Site Visit"]})})]}),0===t.length?(0,s.jsx)(l.Zp,{children:(0,s.jsxs)(l.Wu,{className:"flex flex-col items-center justify-center py-12",children:[(0,s.jsx)(y,{className:"h-12 w-12 text-muted-foreground mb-4"}),(0,s.jsx)("h3",{className:"text-lg font-semibold mb-2",children:"No site visits planned"}),(0,s.jsx)("p",{className:"text-muted-foreground mb-4",children:"Create your first site visit to get started"}),(0,s.jsx)(o.$,{asChild:!0,children:(0,s.jsxs)(i.default,{href:"/site-visits/new",children:[(0,s.jsx)(b.A,{className:"h-4 w-4 mr-2"}),"Plan Site Visit"]})})]})}):(0,s.jsxs)(l.Zp,{children:[(0,s.jsx)(l.aR,{children:(0,s.jsx)(l.ZB,{children:"Planned Site Visits"})}),(0,s.jsx)(l.Wu,{children:(0,s.jsxs)(p,{children:[(0,s.jsx)(x,{children:(0,s.jsxs)(f,{children:[(0,s.jsx)(h,{children:"Visit Code"}),(0,s.jsx)(h,{children:"Employer"}),(0,s.jsx)(h,{children:"Site"}),(0,s.jsx)(h,{children:"Scheduled"}),(0,s.jsx)(h,{children:"Status"}),(0,s.jsx)(h,{children:"Est. Workers"}),(0,s.jsx)(h,{children:"Actions"})]})}),(0,s.jsx)(m,{children:t.map(e=>(0,s.jsxs)(f,{children:[(0,s.jsx)(v,{className:"font-medium",children:(0,s.jsx)(i.default,{href:`/site-visits/${e.sv_code}`,className:"underline decoration-dotted",children:e.sv_code})}),(0,s.jsx)(v,{children:e.employer?.name||"Unknown"}),(0,s.jsx)(v,{children:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(j,{className:"h-4 w-4 text-muted-foreground"}),(0,s.jsxs)("div",{children:[(0,s.jsx)("div",{className:"font-medium",children:e.job_site?.name||"Unknown"}),(0,s.jsx)("div",{className:"text-sm text-muted-foreground",children:e.job_site?.location})]})]})}),(0,s.jsx)(v,{children:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(w,{className:"h-4 w-4 text-muted-foreground"}),e.scheduled_at?new Date(e.scheduled_at).toLocaleString():"-"]})}),(0,s.jsx)(v,{children:a(e.outcomes_locked)}),(0,s.jsx)(v,{children:(0,s.jsxs)("div",{className:"flex items-center gap-2",children:[(0,s.jsx)(N,{className:"h-4 w-4 text-muted-foreground"}),e.estimated_workers_count]})}),(0,s.jsx)(v,{children:(0,s.jsx)(o.$,{asChild:!0,variant:"outline",size:"sm",children:(0,s.jsx)(i.default,{href:`/site-visits/${e.sv_code}`,children:"View"})})})]},e.id))})]})})]})]})}},78447:(e,t,r)=>{"use strict";r.d(t,{E:()=>d});var s=r(45512);r(58009);var a=r(21643),i=r(44195);let n=(0,a.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function d({className:e,variant:t,...r}){return(0,s.jsx)("div",{className:(0,i.cn)(n({variant:t}),e),...r})}},39400:(e,t,r)=>{"use strict";r.d(t,{$:()=>l});var s=r(45512),a=r(58009),i=r(12705),n=r(21643),d=r(44195);let o=(0,n.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),l=a.forwardRef(({className:e,variant:t,size:r,asChild:a=!1,...n},l)=>{let c=a?i.DX:"button";return(0,s.jsx)(c,{className:(0,d.cn)(o({variant:t,size:r,className:e})),ref:l,...n})});l.displayName="Button"},64590:(e,t,r)=>{"use strict";r.d(t,{Wu:()=>l,ZB:()=>o,Zp:()=>n,aR:()=>d});var s=r(45512),a=r(58009),i=r(44195);let n=a.forwardRef(({className:e,...t},r)=>(0,s.jsx)("div",{ref:r,className:(0,i.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",e),...t}));n.displayName="Card";let d=a.forwardRef(({className:e,...t},r)=>(0,s.jsx)("div",{ref:r,className:(0,i.cn)("flex flex-col space-y-1.5 p-6",e),...t}));d.displayName="CardHeader";let o=a.forwardRef(({className:e,...t},r)=>(0,s.jsx)("h3",{ref:r,className:(0,i.cn)("text-2xl font-semibold leading-none tracking-tight",e),...t}));o.displayName="CardTitle",a.forwardRef(({className:e,...t},r)=>(0,s.jsx)("p",{ref:r,className:(0,i.cn)("text-sm text-muted-foreground",e),...t})).displayName="CardDescription";let l=a.forwardRef(({className:e,...t},r)=>(0,s.jsx)("div",{ref:r,className:(0,i.cn)("p-6 pt-0",e),...t}));l.displayName="CardContent",a.forwardRef(({className:e,...t},r)=>(0,s.jsx)("div",{ref:r,className:(0,i.cn)("flex items-center p-6 pt-0",e),...t})).displayName="CardFooter"},62895:(e,t,r)=>{"use strict";r.d(t,{b:()=>a});var s=r(89979);function a(){return(0,s.UU)("http://localhost","dev")}},93607:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>a});var s=r(62740);function a({children:e}){return(0,s.jsx)(s.Fragment,{children:e})}},31977:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>a});var s=r(62740);function a(){return(0,s.jsx)("div",{className:"p-6",children:"Loading..."})}},22924:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>i,dynamic:()=>a});var s=r(46760);let a=(0,s.registerClientReference)(function(){throw Error("Attempted to call dynamic() from the server but dynamic is on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/workspace/web-next/src/app/site-visits/page.tsx","dynamic"),i=(0,s.registerClientReference)(function(){throw Error("Attempted to call the default export of \"/workspace/web-next/src/app/site-visits/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/workspace/web-next/src/app/site-visits/page.tsx","default")}};var t=require("../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[172,115,654],()=>r(60712));module.exports=s})();